<div class="page-body">
    <div class="row">
      <div class="col-lg-12">
        <div class="md-tabs md-card-tabs">
          <ngb-tabset>
            <ngb-tab title="Moje ogłoszenia">
                <ng-template ngbTabContent>
                  <div [@fadeInOutTranslate] class="m-t-15">
                    <!-- info card start -->
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-header-text">Ogłoszenia</h5>
                        <button id="edit-btn" type="button" class="btn btn-sm btn-success pull-right ripple light" (click)="addOffer()">
                          <i class="icofont icofont-plus"></i> Nowe Ogłoszenie
                        </button>
                      </div>
                      <div class="card-body">
                        <div class="row" style="margin: auto;" >
                          <div *ngFor="let item of user.offers " class="col-xl-3 col-md-6" style="">
                              <div ngbDropdown class="card user-card">
                                <span ngbDropdownToggle class="dropdown-toggle addon-btn text-muted pull-right service-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" role="tooltip">
                                </span>
                                <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right b-none services-list">
                                  <a class="dropdown-item" href="javascript:"><i class="icofont icofont-edit"></i> Edytuj</a>
                                  <a class="dropdown-item" href="javascript:"><i class="icofont icofont-ui-delete"></i> Usuń</a>
                                </div>
                                <div class="card-block text-center" style="">
                                  <div class="" style="">
                                    <img height="200px" src="https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2F4.bp.blogspot.com%2F-nsJPARPvroM%2FVerAOx3o7KI%2FAAAAAAAAElQ%2Fz9orWEOiBsk%2Fs1600%2Flalka.jpg&f=1&nofb=1" class="" alt="User-Profile-Image">
                                  </div>
                                  <h6 class="m-t-25 m-b-10">{{ item.book.title }}</h6>
                                  <p class="text-muted" >{{ item.book.author }}</p>
                                  <p class="text-c d-block"  >{{ item.address.name }}</p>
                                  <p class="text-c d-block">{{ item.price }}zł</p>
                                  <i *ngIf="item.type; else noexchange" class="fa fa-check"> Wymiana</i>
                                  <ng-template #noexchange><i class="fa fa-close"> Wymiana</i></ng-template>
                                  <button class="btn btn-primary d-block ripple light">Więcej</button>
                                </div>
                              </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-template>
              </ngb-tab>
            <ngb-tab title="Dane">
              <ng-template ngbTabContent>
                <div [@fadeInOutTranslate] class="m-t-15">
                  <!-- personal card start -->
                  <div class="card">
                    <div class="card-header">
                      <h5 class="card-header-text">Dane</h5>
                      <button id="edit-btn" type="button" class="btn btn-sm btn-primary pull-right ripple light" (click)="toggleEditProfile()">
                        <i class="icofont {{ editProfileIcon }}"></i> Eytuj Profil
                      </button>
                    </div>
                    <div class="card-body">
                      <div class="view-info" *ngIf="editProfile">
                        <div class="row">
                          <div class="col-lg-12">
                            <div class="general-info">
                              <div class="row">
                                <div class="col-lg-12 col-xl-4">
                                  <div class="table-responsive">
                                    <table class="table m-0">
                                      <tbody>
                                      <tr>
                                        <th scope="row">
                                          <div class="data-container">
                                            <div class="adnot">
                                              Imię i Nazwisko
                                            </div>
                                            <div>
                                              {{user.firstName}} {{user.lastName}}
                                            </div>
                                          </div>
                                        </th>
                                      </tr>
                                      <tr>
                                        <th scope="row">
                                          <div class="data-container">
                                            <div class="adnot">
                                              E-mail
                                            </div>
                                            <div>
                                              {{user.email}}
                                            </div>
                                          </div>
                                        </th>
                                      </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                                <!-- end of table col-lg-6 -->
                                <div class="col-lg-12 col-xl-4">
                                  <div class="table-responsive">
                                    <table class="table m-0">
                                      <tbody>
                                      <tr>
                                        <th scope="row">
                                          <div class="data-container">
                                            <div class="adnot">
                                              Miejscowość
                                            </div>
                                            <div>
                                              {{user.address.name}}
                                            </div>
                                          </div>
                                        </th>
                                      </tr>
                                      <tr>
                                        <th scope="row">
                                          <div class="data-container">
                                            <div class="adnot">
                                              Hasło
                                            </div>
                                            <div>
                                              <a [routerLink]="['/auth/change']">Zmień Hasło</a>
                                            </div>
                                          </div>
                                        </th>
                                      </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                                <!-- end of table col-lg-6 -->
                                <div class="col-lg-12 col-xl-4">
                                  <div class="table-responsive">
                                    <table class="table m-0">
                                      <tbody>
                                      <tr>
                                        <th scope="row">
                                          <div class="data-container">
                                            <div class="adnot">
                                              Nazwa Użytkownika
                                            </div>
                                            <div>
                                              {{user.userName}}
                                            </div>
                                          </div>
                                        </th>
                                      </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                              </div>
                              <!-- end of row -->
                            </div>
                            <!-- end of general info -->
                          </div>
                          <!-- end of col-lg-12 -->
                        </div>
                        <!-- end of row -->
                      </div>
                      <!-- end of view-info -->
                      <form [formGroup]='form' class="edit-info" *ngIf="!editProfile">
                        <div class="row">
                          <div class="col-lg-12">
                            <div class="general-info form-material">
                              <div class="row">
                                <div class="col-lg-6 ">
                                  <div class="material-group">
                                    <div class="material-addone">
                                      <i class="icofont icofont-user"></i>
                                    </div>
                                    <div class="form-group form-primary marg">
                                      <input type="text" name="footer-email" class="form-control" required="" value="{{form.value.firstName}}">
                                      <span class="form-bar"></span>
                                      <label class="float-label">Imię</label>
                                    </div>
                                    <div class="form-group form-primary marg">
                                      <input type="text" name="footer-email" class="form-control" required="" value="{{form.value.lastName}}">
                                      <span class="form-bar"></span>
                                      <label class="float-label">Nazwisko</label>
                                    </div>
                                  </div>
  
                                  <div class="material-group">
                                    <div class="material-addone">
                                      <i class="icofont icofont-location-pin"></i>
                                    </div>
                                    <div class="form-group form-primary">
                                      <input type="text" name="footer-email" class="form-control"  required="" value="{{form.value.address.name}}" 
                                      (click)=' openDropDown() ' 
                                      (keyup)="onStrokeSearch($event)" formControlName="address">
                                      <span class="form-bar"></span>
                                      <label class="float-label">Miejscowość</label>
                                      <div clickOutside (clickOutside)="closeDropDown()" style="width: 100%;" class="">
                                        <div *ngIf='showCities' class='search-drop-down drop-down-title col-12 nopadding'>
                                          <div (click)='selectValue(s)' class='search-results ' *ngFor="let s of states | searchFilter: getSearchValue()">
                                            <a [innerHTML]="s | letterBold: getSearchValue()">
                                              {{s}}
                                            </a>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
  
                                </div>
                                <!-- end of table col-lg-6 -->
                                <div class="col-lg-6">
  
                                  <div class="material-group">
                                    <div class="material-addone">
                                      <i class="icofont icofont-ui-user"></i>
                                    </div>
                                    <div class="form-group form-primary">
                                      <input type="text" name="footer-email" class="form-control" required="" value="{{form.value.userName}}">
                                      <span class="form-bar"></span>
                                      <label class="float-label">Nazwa Użytkownika</label>
                                    </div>
                                  </div>
  
                                </div>
                                <!-- end of table col-lg-6 -->
                              </div>
                              <!-- end of row -->
                              <div class="text-center">
                                <a href="javascript:" class="btn btn-primary waves-effect waves-light m-r-20" (click)="saveChanges()">Save</a>
                                <a href="javascript:" id="edit-cancel" class="btn btn-default waves-effect" (click)="toggleEditProfile()">Cancel</a>
                              </div>
                            </div>
                            <!-- end of edit info -->
                          </div>
                          <!-- end of col-lg-12 -->
                        </div>
                        <!-- end of row -->
                      </form>
                      <div class="text-center" *ngIf="editProfile">
                        <a href="javascript:" class="btn btn-primary waves-effect buttons" (click)="logOut()">Wyloguj się</a>
                        <a href="javascript:" class="btn btn-danger waves-effect waves-light m-r-20" (click)="deleteAccount()">Usuń konto</a>
                      </div>
                      <!-- end of edit-info -->
                    </div>
                    <!-- end of card-body -->
                  </div>
                  <!-- personal card end-->
                </div>
              </ng-template>
            </ngb-tab>
            
            <ngb-tab title="Wiadomości">
              <ng-template ngbTabContent>
                <div [@fadeInOutTranslate] class="m-t-15">
                  <div class="row">
                    <div class="col-lg-3">
                      <!-- user contact card left side start -->
                      <div class="card">
                        <div class="card-header contact-user">
                          <h4>Kontakty</h4>
                        </div>
                        <div class="card-body scroll">
                          <ui *ngFor="let contact of contacts" class="contacts">
                            <li (click)="choseContact(contact)">
                              <div class="d-flex bd-highlight">
                                <div class="m-b-5"> 
                                  <img src="https://img.icons8.com/bubbles/100/000000/user.png" class="img-radius" alt="User-Profile-Image"> 
                              </div>
                                <div class="user_info">
                                  <span>{{contact.userName}}</span>
                                  <p>{{contact.messages[contact.messages.length - 1].text}}</p>
                                </div>
                              </div>
                            </li>
                            </ui>
                        </div>
                      </div>
                    </div>
                      <div class="col-lg-9">
                        <div class="card container-fluid">
                          <div class="card-header msg_head">
                            <div class="d-flex bd-highlight">
                              <div class="user_info">
                                <span><b>{{activeContact.userName}}</b></span>
                              </div>
                            </div>
                          </div>
                          <div class="card-body scroll">
                            <div class="d-flex justify-content-start mb-4" *ngFor="let message of activeContact.messages">
                              <div ng-class="{message.sender_id === activeContact.userId ? 'msg_cotainer_send' : 'msg_cotainer' }">
                                {{message.text}}
                                <span class="msg_time">{{message.date}}</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-end mb-4">
                              <div class="msg_cotainer_send">
                                Hi Khalid i am good tnx how about you?
                                <span class="msg_time_send">8:55 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                I am good too, thank you for your chat template
                                <span class="msg_time">9:00 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-end mb-4">
                              <div class="msg_cotainer_send">
                                You are welcome
                                <span class="msg_time_send">9:05 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                I am looking for your next templates
                                <span class="msg_time">9:07 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-end mb-4">
                              <div class="msg_cotainer_send">
                                Ok, thank you have a good day
                                <span class="msg_time_send">9:10 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                            <div class="d-flex justify-content-start mb-4">
                              <div class="msg_cotainer">
                                Bye, see you
                                <span class="msg_time">9:12 AM, Today</span>
                              </div>
                            </div>
                          </div>
                          <div class="card-footer">
                            <div class="right-icon-control">
                              <form class="form-material">
                                  <div class="form-group form-primary">
                                      <input type="text" name="footer-email" class="form-control" required="">
                                      <span class="form-bar"></span>
                                      <label class="float-label">Twoja wiadomość...</label>
                                  </div>
                              </form>
                              <div class="form-icon ">
                                  <button class="btn btn-primary btn-icon  waves-effect waves-light">
                                      <i class="fa fa-paper-plane"></i>
                                  </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                  </div>
                </div>
              </ng-template>
            </ngb-tab>
          </ngb-tabset>
        </div>
      </div>
    </div>
  </div>
  